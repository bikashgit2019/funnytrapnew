!function(e){"use strict";var t=function(e,t){this.element=e,this.module=t};t.prototype.init=function(){return this.canUseWebp(),this.injectEvent(),this},t.prototype.canUseWebp=function(){this.webp=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",t.onload=t.onerror=function(){e(2===t.height)}}))},t.prototype.injectEvent=function(){this.metaOption=e(this.module.container).find(".jeg_meta_option"),this.videoPreview=e(this.module.container).find(".jeg_post_video_preview"),this.moreoption=e(this.module.container).find(".jeg_meta_option .jeg_moreoption"),this.postWrapper=e(this.module.container).find(".jeg_post"),this.metaOptionEvent(),this.videoPreviewEvent()},t.prototype.videoPreviewEvent=function(){this.webp.then(function(t){t&&this.videoPreview.each(function(t,a){var i=e(a).parents(".jeg_thumb"),n=null,s=null,o=new Image;i.bind("mouseenter",function(){var t=e(i).find(".jeg_post_video_preview"),a=e(t).data("preview");o.onload=function(){e(i).addClass("video_previewer"),t.append(o),n=setTimeout((function(){e(i).removeClass("video_previewer")}),2800),clearTimeout(s)},o.src=a+"?"+(new Date).getMonth()+(new Date).getFullYear()}.bind(this)).bind("mouseleave",function(){o.onload=function(){e(i).removeClass("video_previewer"),s=setTimeout((function(){e(i).find(".jeg_post_video_preview img").remove(),o.src=""}),300),clearTimeout(n)},e(i).removeClass("video_previewer"),s=setTimeout((function(){e(i).find(".jeg_post_video_preview img").remove(),o.src=""}),300),clearTimeout(n)}.bind(this))}.bind(this))}.bind(this))},t.prototype.metaOptionEvent=function(){this.moreoption.each((function(t,a){e(a).superfish({popUpSelector:"ul,.jeg_add_to_playlist",delay:250,speed:"fast",animation:{opacity:"show"}}).supposition()})),e(window).on("click",function(){e(this.metaOption).removeClass("loading").removeClass("active"),e(this.metaOption).parents(".jeg_postblock").removeClass("menu-active")}.bind(this)),this.metaOption.bind("click",function(t){t.preventDefault(),t.stopPropagation();var a=t.currentTarget,i=e(a).data("id"),n=e(a).find(".jeg_moreoption");return!e(a).hasClass("loading")&&(e(a).hasClass("active")?(e(a).removeClass("active"),!1):(e(a).addClass("loading"),void e.ajax({url:jnews_ajax_url,type:"post",dataType:"json",data:{post_id:i,action:"get_video_menu"},success:function(t){0===t.data.response?o.login(t.data):(e(this.metaOption).removeClass("loading").removeClass("active"),e(this.metaOption).parents(".jeg_postblock").removeClass("menu-active"),e(n).html("").append(t.data),e(a).removeClass("loading").addClass("active").show(),e(a).parents(".jeg_postblock").addClass("menu-active"),e(a).find('[data-action="jeg_add_post"]').on("click",o.ajaxAddPost.bind(this)),e(a).find(".jeg_moreoption > li:last-child > a").on("click",(function(e){e.preventDefault(),e.stopPropagation()})),e(a).find(".jeg_add_to_playlist").on("click",'[data-action="jeg_add_post"]',o.ajaxAddPost.bind(this)),e(a).find(".jeg_popuplink").bind("click",o.openPlaylistPopup.bind(this)))}.bind(this)})))}.bind(this))};var a=function(){e(".jnews-playlist-items").on("click",'[data-action="jeg_remove_post"]',function(t){t.preventDefault(),this.ajaxRemovePost(e(t.currentTarget))}.bind(this)),e(".jeg_playlist_load_more").on("click","a",function(t){t.preventDefault(),this.ajaxLoadMore(e(t.currentTarget))}.bind(this)),e("[id*='jeg_playlist'] > .jeg_popupform_playlist > form").unbind("submit").on("submit",function(t){t.preventDefault(),this.ajaxPlaylistDashboard(e(t.currentTarget))}.bind(this))};a.prototype.ajaxLoadMore=function(e){var t=e.parents().find('[class*="playlist-items"]'),a={last:t.find(".jnews-playlist-item").last().data("id"),playlist_id:t.data("playlist-id"),type:"load_more",action:"playlist_handler"};this.do_ajax(a,e)},a.prototype.ajaxRemovePost=function(e){var t=e.parents().find('[class*="playlist-items"]'),a={post_id:e.data("post-id"),playlist_id:t.data("playlist-id"),type:"remove_post",action:"playlist_handler"};this.do_ajax(a,e)},a.prototype.ajaxPlaylistDashboard=function(e){var t=e.find('input[name="jnews-playlist-nonce"]'),a=e.find('input[name="type"]'),i={nonce:t.val(),type:a.val(),action:"playlist_handler"};if("create_playlist"===a.val()){var n=e.find('input[name="post_id"]');i.post_id=n.val()}if("create_playlist"!==a.val()){var s=e.find('input[name="playlist_id"]');i.playlist_id=s.val()}if("edit_playlist"===a.val()){var o=e.find('textarea[name="content"]'),d=e.find('input[name="image[]"]');i.content=o.val(),i.image=d.val()}if("delete_playlist"!==a.val()){var l=e.find('input[name="title"]'),r=e.find('select[name="visibility"]');i.title=l.val(),i.visibility=r.find(":selected").val()}this.do_ajax(i,e)},a.prototype.do_ajax=function(t,a){switch(t.type){case"remove_post":var i=a.closest('[class*="playlist-item"]').addClass("playlist-item-removing");break;case"create_playlist":case"edit_playlist":case"delete_playlist":var s=e(a).find(".form-message");s.html(""),a.find('input[type="submit"]').val(a.find('input[type="submit"]').data("process")),a.find('input[type="submit"]').prop("disabled",!0);break;case"load_more":var o=e(a).addClass("active").data("loading");e(a).text(o)}e.ajax({url:jnews_ajax_url,type:"post",dataType:"json",data:t,success:function(o){switch(t.type){case"remove_post":1===o.response?e(".playlist-item-removing").remove():e(".playlist-item-removing").html(i).removeClass("playlist-item-removing"),n(o.message);break;case"create_playlist":a.find('input[type="submit"]').val(a.find('input[type="submit"]').data("string")),a.find('input[type="submit"]').prop("disabled",!1),1===o.response?(n(o.message),e(a).trigger("reset"),e.magnificPopup.close()):s.html(o.message);break;case"edit_playlist":a.find('input[type="submit"]').val(a.find('input[type="submit"]').data("string")),a.find('input[type="submit"]').prop("disabled",!1),1===o.response?(n(o.message),e.magnificPopup.close(),setTimeout(location.reload(),500)):s.html(o.message);break;case"delete_playlist":a.find('input[type="submit"]').val(a.find('input[type="submit"]').data("string")),a.find('input[type="submit"]').prop("disabled",!1),1===o.response?(e.magnificPopup.close(),n(o.message),setTimeout(location.href=o.redirect,500)):s.html(o.message);break;case"load_more":if(o.next){var d=e(a).removeClass("active").data("load");e(a).text(d)}else a.remove();e(".jnews-playlist-items").append(o.html)}}.bind(this)})};var i=function(t){e(t).find(".jeg_category_list_wrapper").each((function(){var t=e(this),a=t.find(".jeg_category_list").addClass("owl-carousel"),i={nav:a.data("nav"),autoplay:a.data("autoplay"),items:void 0===a.data("items")?3:a.data("items"),delay:void 0===a.data("delay")?3e3:a.data("delay"),rtl:a.data("rtl"),margin:void 0===a.data("margin")?20:a.data("margin")};t.hasClass("jeg_col_12")&&(i.items=void 0===a.data("items")?5:a.data("items")),a.on("initialized.owl.carousel",(function(){a.siblings(".jeg_carousel_placeholder").remove(),a.parent().addClass("jeg_carousel_wrapper_loaded")})),a.owlCarousel({rtl:1==jnewsoption.rtl,nav:i.nav,margin:i.margin,navText:!1,dots:!1,loop:!0,mergeFit:!1,center:!1,items:i.items,autoplay:i.autoplay,autoplayTimeout:i.delay,autoWidth:!0,responsive:{0:{items:1,autoWidth:!1},321:{items:1,margin:i.margin>15?15:i.margin,autoWidth:!1},568:{items:i.items,margin:i.margin>15?15:i.margin,autoWidth:!0},1024:{items:i.items,autoWidth:!0}}})})),e(t).find(".jeg_postblock_video_carousel").each((function(){var t=e(this),a=t.find(".jeg_carousel_post").addClass("owl-carousel"),i={nav:a.data("nav"),autoplay:a.data("autoplay"),items:void 0===a.data("items")?3:a.data("items"),delay:void 0===a.data("delay")?3e3:a.data("delay"),rtl:a.data("rtl"),margin:void 0===a.data("margin")?20:a.data("margin"),center:void 0===a.data("center")||a.data("center"),mergeFit:void 0===a.data("mergefit")||a.data("mergefit"),stagePadding:void 0===a.data("stagepadding")?0:a.data("stagepadding"),sliderStyle:void 0===a.data("sliderstyle")?"slider_1":a.data("sliderstyle")};t.hasClass("jeg_col_12")&&(i.items=void 0===a.data("items")?5:a.data("items"));a.on("initialized.owl.carousel",(function(){a.siblings(".jeg_carousel_placeholder").remove(),a.parent().addClass("jeg_carousel_wrapper_loaded")})),a.owlCarousel({rtl:1==jnewsoption.rtl,nav:i.nav,margin:i.margin,navText:!1,dots:!1,loop:!0,mergeFit:i.mergeFit,center:i.center,items:i.items,stagePadding:i.stagePadding,autoplay:i.autoplay,autoplayTimeout:i.delay,responsive:{0:{items:1},321:{items:1,margin:i.margin>15?15:i.margin,stagePadding:i.stagePadding>0?30:0},568:{items:2,margin:i.margin>15?15:i.margin,stagePadding:i.stagePadding>0?50:0},1024:{items:i.items,stagePadding:i.stagePadding>0?i.stagePadding:0}},onInitialized:function(){"slider_4"==i.sliderStyle&&function(){var a=t.find(".owl-nav > div");if(e(a).length){var i=t.find(".thumbnail-container"),n=e(i[0]).outerHeight();e(a).each((function(){var t=e(this),a=t.outerHeight(),i=.5*n-.5*a;t.css("top",i+"px")}))}}()}})})),e(t).find(".jeg_playlist_wrapper").each((function(){var t=e(this),a=t.find(".jeg_playlist").addClass("owl-carousel"),i={nav:a.data("nav"),autoplay:a.data("autoplay"),items:void 0===a.data("items")?3:a.data("items"),delay:void 0===a.data("delay")?3e3:a.data("delay"),rtl:a.data("rtl"),margin:void 0===a.data("margin")?20:a.data("margin")};t.hasClass("jeg_col_12")&&(i.items=void 0===a.data("items")?5:a.data("items")),a.on("initialized.owl.carousel",(function(){a.siblings(".jeg_carousel_placeholder").remove(),a.parent().addClass("jeg_carousel_wrapper_loaded")})),a.owlCarousel({rtl:1==jnewsoption.rtl,nav:i.nav,margin:i.margin,navText:!1,dots:!1,loop:!0,items:i.items,autoplay:i.autoplay,autoplayTimeout:i.delay,responsive:{0:{items:1},321:{items:1,margin:i.margin>15?15:i.margin},568:{items:2,margin:i.margin>15?15:i.margin},1024:{items:i.items}}})}))},n=function(t){var a=e("#notification_action_renderer"),i=a.find("#paper_toast").outerHeight()+30;a.stop(!0,!0),a.finish(),a.removeAttr("style"),a.find("#paper_toast").removeAttr("style"),a.find("#paper_toast").css({opacity:1}),a.find("#paper_toast span#label").html(t),a.animate({bottom:i},1e3,function(){setTimeout(function(){a.animate({bottom:0},1e3,function(){a.find("#paper_toast span#label").html(" ")}.bind(this))}.bind(this),3e3)}.bind(this))},s=function(t,a){var i=e(window),n=e(t);i.on("click",(function(){n.removeClass("loading").removeClass("active")})),a&&t.find(".jeg_moreoption").each((function(t,a){e(a).superfish({popUpSelector:"ul,.jeg_add_to_playlist",delay:250,speed:"fast",animation:{opacity:"show"}}).supposition()})),t.bind("click",(function(t){t.preventDefault(),t.stopPropagation();var n=t.currentTarget,s=e(n);if(s.hasClass("loading"))return!1;if(s.hasClass("active")){if(s.removeClass("active"),!a){var d=s.find(".jeg_sharelist");d.length>0&&d.removeClass("supposition-active")}return!1}if(s.addClass("loading"),a){var l=s.data("id"),r=s.find(".jeg_moreoption");e.ajax({url:jnews_ajax_url,type:"post",dataType:"json",data:{post_id:l,action:"get_video_menu"},success:function(t){0===t.data.response?o.login(t.data):(e(r).html("").append(t.data),s.removeClass("loading").addClass("active"),s.parents(".jeg_postblock").addClass("menu-active"),s.find('[data-action="jeg_add_post"]').on("click",o.ajaxAddPost),s.find(".jeg_moreoption > li:last-child > a").on("click",(function(e){e.preventDefault(),e.stopPropagation()})),s.find(".jeg_add_to_playlist").on("click",'[data-action="jeg_add_post"]',o.ajaxAddPost),s.find(".jeg_popuplink").bind("click",o.openPlaylistPopup))}})}else s.removeClass("loading").addClass("active"),s.each((function(t,a){var n,s=e(a).find(".jeg_sharelist");if(s.length>0){var o=s.width(),d=(s.parents(".jeg_meta_share").width(),i.width()+(n="x",window["y"==n?"pageYOffset":"pageXOffset"]||document.documentElement&&document.documentElement["y"==n?"scrollTop":"scrollLeft"]||document.body["y"==n?"scrollTop":"scrollLeft"]));s.offset().left+o>d&&s.addClass("supposition-active")}})),s.find(".jeg_popuplink").bind("click",o.openPlaylistPopup)}))},o={ajaxAddPost:function(t){t.preventDefault(),t.stopPropagation();var a=e(t.currentTarget),i=a.hasClass("active")?"exclude_post":"add_post",n={post_id:a.parents(".jeg_meta_option").data("id"),playlist_id:a.data("playlist-id"),type:i,action:"playlist_handler"};o.do_ajax(n,a)},do_ajax:function(t,a){switch(t.type){case"exclude_post":case"add_post":a.addClass("loading")}e.ajax({url:jnews_ajax_url,type:"post",dataType:"json",data:t,success:function(e){switch(t.type){case"exclude_post":a.removeClass("active").removeClass("loading"),n(e.message);break;case"add_post":a.addClass("active").removeClass("loading"),n(e.message)}}})},openPlaylistPopup:function(t){t.preventDefault(),t.stopPropagation();var a=e(e(t.currentTarget).attr("href")).find('input[name="post_id"]');e(a).length&&a.val(e(t.currentTarget).data("post-id")),e.magnificPopup.open({items:{removalDelay:500,midClick:!0,src:e(t.currentTarget).attr("href"),type:"inline"}})},login:function(t){t&&e("#jeg_loginform form").find("h3").html(t.message),window.jnews.loginregister.hook_form(),e.magnificPopup.open({items:{removalDelay:500,midClick:!0,src:"#jeg_loginform",type:"inline"}})}},d=function(t){this.container=t,this.drop=".jeg_action",this.dropExpanded=".jeg_action_expanded",this.primaryNav='.item-list-tabs[aria-label*="primary navigation"]',this.classesDropExpanded="jeg_action_expanded",this.container.find(this.primaryNav).okayNav({swipe_enabled:!1,threshold:80}),this.container.bind("click touchstart",function(t){var a=e(t.target).parents(this.dropExpanded);e(this.dropExpanded).not(a).removeClass(this.classesDropExpanded)}.bind(this)),this.container.find(this.drop).bind("click",function(t){var a=e(t.currentTarget);a.is(this.dropExpanded)?e(t.target).hasClass("jeg_action_toggle")&&(a.removeClass(this.classesDropExpanded),t.preventDefault()):(a.addClass(this.classesDropExpanded),t.preventDefault())}.bind(this))};d.prototype.dropMenuMoveItem=function(){e(this.container).find(this.drop).each((function(){var t=e(this);t.find(".menu-item").each((function(a,i){var n;a<2&&(n=e(i).detach()).length&&(n.removeClass("menu-item").find("a"),n.insertBefore(t))})),t.find(".menu-item").length||t.remove()}))},e(".jeg_module_hook").on("jnews_module_init",(function(a,i){var n=new t(this,i).init();e(this).data("video",n)})).on("jnews_module_ajax",(function(){e(this).data("video").injectEvent()})),e(document).bind("ready",(function(){new a,new i(e("body")),new d(e("#buddypress")).dropMenuMoveItem();var t=e(".single-playlist"),n=e(".single-format-video"),l=t.find(".jeg_meta_option"),r=t.find(".jeg_meta_share"),p=n.find(".jeg_meta_option"),c=n.find(".jeg_meta_share");s(l),s(r),s(p,!0),s(c),e(".jeg_login_required").bind("click",(function(e){e.preventDefault(),o.login()})),e("body").on("click",".jeg_bp_action.follow, .jeg_bp_action.unfollow",(function(t){var a,i,n,s,o,d,l,r,p;return t.preventDefault(),a=e(this),s=(n=a).parents(".follow-wrapper"),o=n.attr("id"),d=n.attr("href"),l=s.find(".jnews-spinner"),r=n.parents(".jeg_meta_subscribe:not(.no-follow)").find(".jeg_subscribe_count"),p="",o=o.split("-"),i=o[0],o=o[1],d=(d=(d=d.split("?_wpnonce="))[1].split("&"))[0],e.ajax({url:ajaxurl,type:"post",data:{action:"bp_"+i,uid:o,_wpnonce:d},beforeSend:function(){l.length&&(n.css("display","none"),l.css("display","block"))},success:function(t){if(t.length){var a=n.attr("class");p=e(t),a=a.replace(i+" ",""),p.addClass(a)}}}).always((function(){r.length?e.ajax({url:ajaxurl,type:"post",data:{action:"jnews_get_subscribe_count",uid:o,_wpnonce:d},success:function(t){if(t.status){var a=e(t.content);r.replaceWith(a)}}}).always((function(){l.length&&(n.replaceWith(p),l.css("display","none"))})):l.length&&(n.replaceWith(p),n.css("display",""),l.css("display","none"))})),!1}))})),e(document).bind("jnews_vc_trigger jnews_elementor_trigger",(function(t,a){new i(e(a))}))}(jQuery);